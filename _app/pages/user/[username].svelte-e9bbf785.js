import{S as e,i as t,s as n,e as a,t as s,k as i,c as r,a as o,g as l,d as m,n as h,b as d,f as u,F as f,h as c,E as p,J as v,O as g}from"../../chunks/vendor-4048497a.js";function E(e,t,n){const a=e.slice();return a[2]=t[n],a}function L(e){let t,n=(e[2].media.title.romaji||e[2].media.title.native)+"";return{c(){t=s(n)},l(e){t=l(e,n)},m(e,n){u(e,t,n)},p(e,a){2&a&&n!==(n=(e[2].media.title.romaji||e[2].media.title.native)+"")&&c(t,n)},d(e){e&&m(t)}}}function w(e){let t,n,i,h=(e[2].media.title.romaji||e[2].media.title.native)+"";return{c(){t=a("abbr"),n=s(h),this.h()},l(e){t=r(e,"ABBR",{title:!0});var a=o(t);n=l(a,h),a.forEach(m),this.h()},h(){d(t,"title",i=e[2].media.title.english)},m(e,a){u(e,t,a),f(t,n)},p(e,a){2&a&&h!==(h=(e[2].media.title.romaji||e[2].media.title.native)+"")&&c(n,h),2&a&&i!==(i=e[2].media.title.english)&&d(t,"title",i)},d(e){e&&m(t)}}}function b(e){var t;let n,p,v,g,E,b,C,N,y,A,j,R,T,P,O,k,I,S,$,x,M,Y=e[2].timeLeft+"",_=e[2].episodesLeft+"",q=((null==(t=e[2].media.season)?void 0:t.toLowerCase())||"")+"",D=(e[2].media.seasonYear||"forgotten by time")+"",H=e[2].media.status.toLowerCase()+"",B=e[2].status.toLowerCase()+"";function G(e,t){return"english"in e[2].media.title?w:L}let J=G(e),U=J(e);return{c(){n=a("li"),p=a("math"),v=s(Y),g=s(" minutes in "),E=a("math"),b=s(_),C=s(" episodes\n    –\n    "),N=a("a"),y=a("strong"),U.c(),j=s("\n    (\n      "),R=s(q),T=i(),P=s(D),O=s("\n      , \n      "),k=s(H),I=s("\n      , \n      "),S=s(e[0]),$=i(),x=s(B),M=s("\n    )\n  "),this.h()},l(t){n=r(t,"LI",{});var a=o(n);p=r(a,"MATH",{});var s=o(p);v=l(s,Y),s.forEach(m),g=l(a," minutes in "),E=r(a,"MATH",{});var i=o(E);b=l(i,_),i.forEach(m),C=l(a," episodes\n    –\n    "),N=r(a,"A",{href:!0});var d=o(N);y=r(d,"STRONG",{});var u=o(y);U.l(u),u.forEach(m),d.forEach(m),j=l(a,"\n    (\n      "),R=l(a,q),T=h(a),P=l(a,D),O=l(a,"\n      , \n      "),k=l(a,H),I=l(a,"\n      , \n      "),S=l(a,e[0]),$=h(a),x=l(a,B),M=l(a,"\n    )\n  "),a.forEach(m),this.h()},h(){d(N,"href",A=`https://anilist.co/anime/${e[2].media.id}/`)},m(e,t){u(e,n,t),f(n,p),f(p,v),f(n,g),f(n,E),f(E,b),f(n,C),f(n,N),f(N,y),U.m(y,null),f(n,j),f(n,R),f(n,T),f(n,P),f(n,O),f(n,k),f(n,I),f(n,S),f(n,$),f(n,x),f(n,M)},p(e,t){var n;2&t&&Y!==(Y=e[2].timeLeft+"")&&c(v,Y),2&t&&_!==(_=e[2].episodesLeft+"")&&c(b,_),J===(J=G(e))&&U?U.p(e,t):(U.d(1),U=J(e),U&&(U.c(),U.m(y,null))),2&t&&A!==(A=`https://anilist.co/anime/${e[2].media.id}/`)&&d(N,"href",A),2&t&&q!==(q=((null==(n=e[2].media.season)?void 0:n.toLowerCase())||"")+"")&&c(R,q),2&t&&D!==(D=(e[2].media.seasonYear||"forgotten by time")+"")&&c(P,D),2&t&&H!==(H=e[2].media.status.toLowerCase()+"")&&c(k,H),1&t&&c(S,e[0]),2&t&&B!==(B=e[2].status.toLowerCase()+"")&&c(x,B)},d(e){e&&m(n),U.d()}}}function C(e){let t,n,L,w,C,N,y,A,j,R,T;document.title=t=e[0]+" – Path of Anilist Resistance";let P=e[1],O=[];for(let a=0;a<P.length;a+=1)O[a]=b(E(e,P,a));return{c(){n=i(),L=a("h2"),w=s("for brave weeb "),C=a("u"),N=s(e[0]),y=i(),A=a("a"),j=s("Pick someone else"),R=i(),T=a("ol");for(let e=0;e<O.length;e+=1)O[e].c();this.h()},l(t){p('[data-svelte="svelte-63y4yt"]',document.head).forEach(m),n=h(t),L=r(t,"H2",{});var a=o(L);w=l(a,"for brave weeb "),C=r(a,"U",{});var s=o(C);N=l(s,e[0]),s.forEach(m),a.forEach(m),y=h(t),A=r(t,"A",{href:!0});var i=o(A);j=l(i,"Pick someone else"),i.forEach(m),R=h(t),T=r(t,"OL",{});var d=o(T);for(let e=0;e<O.length;e+=1)O[e].l(d);d.forEach(m),this.h()},h(){d(A,"href","/")},m(e,t){u(e,n,t),u(e,L,t),f(L,w),f(L,C),f(C,N),u(e,y,t),u(e,A,t),f(A,j),u(e,R,t),u(e,T,t);for(let n=0;n<O.length;n+=1)O[n].m(T,null)},p(e,[n]){if(1&n&&t!==(t=e[0]+" – Path of Anilist Resistance")&&(document.title=t),1&n&&c(N,e[0]),3&n){let t;for(P=e[1],t=0;t<P.length;t+=1){const a=E(e,P,t);O[t]?O[t].p(a,n):(O[t]=b(a),O[t].c(),O[t].m(T,null))}for(;t<O.length;t+=1)O[t].d(1);O.length=P.length}},i:v,o:v,d(e){e&&m(n),e&&m(L),e&&m(y),e&&m(A),e&&m(R),e&&m(T),g(O,e)}}}async function N({page:e,fetch:t}){const n={userName:e.params.username},a=await t("https://graphql.anilist.co/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n      query ($userName: String) {\n        MediaListCollection(userName: $userName, status_not_in: [CURRENT, DROPPED, REPEATING], type: ANIME) {\n          hasNextChunk\n          user {\n            name\n          }\n          lists {\n            entries {\n              status\n              progress\n              media {\n                id\n                status\n                title {\n                  romaji\n                  english\n                  native\n                }\n                season\n                seasonYear\n                seasonInt\n                duration\n                episodes\n              }\n            }\n          }\n        }\n      }\n    ",variables:n})}),s=(await a.json()).data.MediaListCollection;if(s.hasNextChunk)throw"pagination was not expected, but here we are, lol";let i=s.lists.map((e=>e.entries)).flat().filter((e=>"NOT_YET_RELEASED"!=e.media.status));for(const r of i)r.episodesLeft=(r.media.episodes||1/0)-r.progress,r.timeLeft=r.media.duration*r.episodesLeft;return i=i.filter((e=>e.timeLeft>0)),i.sort(((e,t)=>e.timeLeft-t.timeLeft||e.media.seasonInt-t.media.seasonInt)),{props:{username:s.user.name,entries:i}}}function y(e,t,n){let{username:a,entries:s}=t;return e.$$set=e=>{"username"in e&&n(0,a=e.username),"entries"in e&&n(1,s=e.entries)},[a,s]}class A extends e{constructor(e){super(),t(this,e,y,C,n,{username:0,entries:1})}}export{A as default,N as load};
